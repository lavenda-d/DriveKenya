import { useEffect, useRef } from 'react';\nimport { io } from 'socket.io-client';\n\nconst useRealtimeUpdates = (userId, onUpdate) => {\n  const socketRef = useRef(null);\n\n  useEffect(() => {\n    if (!userId) return;\n\n    // Initialize socket connection\n    socketRef.current = io(process.env.REACT_APP_SOCKET_URL || 'http://localhost:3001', {\n      auth: {\n        token: localStorage.getItem('token')\n      },\n      transports: ['websocket', 'polling']\n    });\n\n    const socket = socketRef.current;\n\n    // Join user room for personalized updates\n    socket.emit('join_user_room', userId);\n\n    // Listen for various real-time events\n    socket.on('booking_update', (data) => {\n      onUpdate('booking', data);\n    });\n\n    socket.on('earnings_update', (data) => {\n      onUpdate('earnings', data);\n    });\n\n    socket.on('maintenance_alert', (data) => {\n      onUpdate('maintenance', data);\n    });\n\n    socket.on('pricing_change', (data) => {\n      onUpdate('pricing', data);\n    });\n\n    socket.on('car_status_change', (data) => {\n      onUpdate('car_status', data);\n    });\n\n    socket.on('admin_notification', (data) => {\n      onUpdate('admin', data);\n    });\n\n    socket.on('new_user_registration', (data) => {\n      onUpdate('new_user', data);\n    });\n\n    socket.on('car_approval_request', (data) => {\n      onUpdate('car_approval', data);\n    });\n\n    // Handle connection events\n    socket.on('connect', () => {\n      console.log('ðŸ”Œ Connected to real-time updates');\n    });\n\n    socket.on('disconnect', () => {\n      console.log('ðŸ”Œ Disconnected from real-time updates');\n    });\n\n    socket.on('error', (error) => {\n      console.error('Socket error:', error);\n    });\n\n    // Cleanup on unmount\n    return () => {\n      if (socket) {\n        socket.disconnect();\n      }\n    };\n  }, [userId, onUpdate]);\n\n  // Function to emit events\n  const emit = (event, data) => {\n    if (socketRef.current) {\n      socketRef.current.emit(event, data);\n    }\n  };\n\n  return { emit };\n};\n\nexport default useRealtimeUpdates;